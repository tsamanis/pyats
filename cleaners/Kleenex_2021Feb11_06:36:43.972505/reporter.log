0: osboxes: 2021-02-11T06:36:46: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Starting Reporter Unix socket server-----------------
1: osboxes: 2021-02-11T06:36:46: %REPORTER-6-INFO: %[pid=14472][pname=ForkProcess-1]: Reporter server (socket /home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/reporter.sock) ready to receive requests----------------
2: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Accepted new client connection
3: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Received {'name': 'ping', 'data': {}} from client
4: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Returning pong to client
5: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Received {'name': 'register_client', 'data': {'pid': '14453', 'ppid': '3678'}} from client
6: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Registered Client (pid: 14453, num_ctx: 0)
7: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Received {'name': 'start_testsuite', 'data': {'id': 'Kleenex', 'type': 'CleanSuite', 'testbed': 'tbed', 'submitter': 'root', 'cli': '/home/osboxes/pyATS/bin/pyats clean --testbed-file ../tbed.yml --clean-file clean.yml --clean-device R1', 'host': 'osboxes'}} from Client (pid: 14453, num_ctx: 0)
8: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Received {'name': 'start_plugin', 'data': {'id': 'Standalone-1', 'name': 'Kleenex', 'type': 'Standalone', 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.log', 'clean_files': ['clean.yml']}} from Client (pid: 14453, num_ctx: 1)
9: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Accepted new client connection
10: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Received {'name': 'ping', 'data': {}} from client
11: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Returning pong to client
12: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Received {'name': 'register_client', 'data': {'pid': '14473', 'ppid': '14453'}} from client
13: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Registered Client (pid: 14473, num_ctx: 0)
14: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1]: Received {'name': 'start_section', 'data': {'type': 'Device', 'id': 'R1', 'cleaner': 'PyatsDeviceClean', 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log'}} from Client (pid: 14473, num_ctx: 0)
15: osboxes: 2021-02-11T06:36:47: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'start_section', 'data': {'id': 'CleanTestcase', 'xref': {'file': '/home/osboxes/pyATS/lib/python3.8/site-packages/genie/libs/clean/clean.py', 'line': 44}, 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log', 'type': 'Testcase', 'parameters': {}}} from Client (pid: 14473, num_ctx: 1)
16: osboxes: 2021-02-11T06:36:48: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'start_section', 'data': {'id': 'connect', 'xref': {'file': 'unknown', 'line': 0}, 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log', 'type': 'TestSection', 'parameters': {'device': '<Device R1 at 0x7fd466048760>', 'timeout': 100}, 'description': ' This stage connects to the device that is being cleaned.\n\n    Stage Schema\n    ------------\n    connect:\n        timeout (int, optional): Connection timeout. Defaults to 200.\n        retry_timeout (int, optional): Overall timeout for retry mechanism. Defaults to 0 which means no retry.\n        retry_interval (int, optional): Interval for retry mechanism. Defaults to 0 which means no retry.\n\n    Example\n    -------\n    connect:\n        timeout: 60\n\n    '}} from Client (pid: 14473, num_ctx: 2)
17: osboxes: 2021-02-11T06:36:49: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'id': 'connect', 'result': Passed, 'parameters': {'device': '<Device R1 at 0x7fd466048760>', 'timeout': 100}, 'description': ' This stage connects to the device that is being cleaned.\n\n    Stage Schema\n    ------------\n    connect:\n        timeout (int, optional): Connection timeout. Defaults to 200.\n        retry_timeout (int, optional): Overall timeout for retry mechanism. Defaults to 0 which means no retry.\n        retry_interval (int, optional): Interval for retry mechanism. Defaults to 0 which means no retry.\n\n    Example\n    -------\n    connect:\n        timeout: 60\n\n    '}} from Client (pid: 14473, num_ctx: 3)
18: osboxes: 2021-02-11T06:36:49: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'start_section', 'data': {'id': 'apply_configuration', 'xref': {'file': 'unknown', 'line': 0}, 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log', 'type': 'TestSection', 'parameters': {'device': '<Device R1 at 0x7fd466048760>', 'configuration': 'hostname PE1'}, 'description': " Apply configuration on the device, either by providing a file and/or\n    raw configuration.\n\n    Stage Schema\n    ------------\n    apply_configuration:\n        configuration: <Configuration block to be applied, 'str'> (Optional)\n        configuration_from_file: <File that contains a configuration to apply, 'str'> (Optional)\n        file: <Configuration file for config replace> (Optional)\n        configure_replace: <Use configure replace instead of copy 'bool'> (Optional)\n        config_timeout: <Timeout in seconds, 'int'> (Optional)\n        config_stable_time: <Time for configuration stability in seconds, 'int'> (Optional)\n        copy_vdc_all: <To copy on all VDCs or not, 'bool'> (Optional)\n        max_time: <Maximum time section will take for checks in seconds, 'int'> (Optional)\n        check_interval: <Time interval, 'int'> (Optional)\n        skip_copy_run_start: <Option to skip copy run start. Default False. 'bool'> (Optional)\n\n    Example\n    -------\n    apply_configuration:\n        configuration: |\n            interface ethernet2/1\n            no shutdown\n        file: bootflash:/ISSUCleanGolden.cfg\n        configure_replace: True\n        config_timeout: 600\n        config_stable_time: 10\n        copy_vdc_all: True\n        max_time: 300\n        check_interval: 20\n\n    "}} from Client (pid: 14473, num_ctx: 2)
19: osboxes: 2021-02-11T06:36:50: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'start_section', 'data': {'id': 'STEP 1', 'xref': {'file': '/home/osboxes/pyATS/lib/python3.8/site-packages/genie/libs/clean/clean.py', 'line': 249}, 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log', 'type': 'Step', 'name': 'Apply configuration to device R1 after reload', 'continue_': False}} from Client (pid: 14473, num_ctx: 3)
20: osboxes: 2021-02-11T06:36:50: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'id': 'STEP 1', 'result': Passed, 'name': 'Apply configuration to device R1 after reload'}} from Client (pid: 14473, num_ctx: 4)
21: osboxes: 2021-02-11T06:36:50: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'start_section', 'data': {'id': 'STEP 2', 'xref': {'file': '/home/osboxes/pyATS/lib/python3.8/site-packages/genie/libs/clean/clean.py', 'line': 249}, 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log', 'type': 'Step', 'name': 'Copy running-config to startup-config on device R1', 'continue_': False}} from Client (pid: 14473, num_ctx: 3)
22: osboxes: 2021-02-11T06:36:54: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'id': 'STEP 2', 'result': Passed, 'name': 'Copy running-config to startup-config on device R1'}} from Client (pid: 14473, num_ctx: 4)
23: osboxes: 2021-02-11T06:36:54: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'start_section', 'data': {'id': 'STEP 3', 'xref': {'file': '/home/osboxes/pyATS/lib/python3.8/site-packages/genie/libs/clean/clean.py', 'line': 249}, 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log', 'type': 'Step', 'name': 'Allow configuration to stabilize on device R1', 'continue_': False}} from Client (pid: 14473, num_ctx: 3)
24: osboxes: 2021-02-11T06:37:04: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'id': 'STEP 3', 'result': Passed, 'name': 'Allow configuration to stabilize on device R1'}} from Client (pid: 14473, num_ctx: 4)
25: osboxes: 2021-02-11T06:37:04: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'id': 'apply_configuration', 'result': Passed, 'parameters': {'device': '<Device R1 at 0x7fd466048760>', 'configuration': 'hostname PE1'}, 'description': " Apply configuration on the device, either by providing a file and/or\n    raw configuration.\n\n    Stage Schema\n    ------------\n    apply_configuration:\n        configuration: <Configuration block to be applied, 'str'> (Optional)\n        configuration_from_file: <File that contains a configuration to apply, 'str'> (Optional)\n        file: <Configuration file for config replace> (Optional)\n        configure_replace: <Use configure replace instead of copy 'bool'> (Optional)\n        config_timeout: <Timeout in seconds, 'int'> (Optional)\n        config_stable_time: <Time for configuration stability in seconds, 'int'> (Optional)\n        copy_vdc_all: <To copy on all VDCs or not, 'bool'> (Optional)\n        max_time: <Maximum time section will take for checks in seconds, 'int'> (Optional)\n        check_interval: <Time interval, 'int'> (Optional)\n        skip_copy_run_start: <Option to skip copy run start. Default False. 'bool'> (Optional)\n\n    Example\n    -------\n    apply_configuration:\n        configuration: |\n            interface ethernet2/1\n            no shutdown\n        file: bootflash:/ISSUCleanGolden.cfg\n        configure_replace: True\n        config_timeout: 600\n        config_stable_time: 10\n        copy_vdc_all: True\n        max_time: 300\n        check_interval: 20\n\n    "}} from Client (pid: 14473, num_ctx: 3)
26: osboxes: 2021-02-11T06:37:04: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'start_section', 'data': {'id': 'reload', 'xref': {'file': 'unknown', 'line': 0}, 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log', 'type': 'TestSection', 'parameters': {'device': '<Device R1 at 0x7fd466048760>', 'reload_service_args': {'timeout': 600}}, 'description': " This stage reloads the device.\n\n    Stage Schema\n    ------------\n    reload:\n        reload_service_args: (Optional, if not specified defaults below are used)\n            timeout: <reload timeout value, default 800 seconds. 'int'> (Optional)\n            reload_creds: <Credential name defined in the testbed yaml file to be used during reload, default 'default'. 'str'> (Optional)\n            prompt_recovery: <Enable/Disable prompt recovery feature, 'bool'> (Optional)\n            <Key>: <Value> (Any other key:value pairs that the unicon reload service allows for)\n\n        check_modules:\n            check: <Enable/Disable checking of modules after reload, default 'True'. 'bool'> (Optional)>\n            timeout: <timeout value to verify modules are in stable state, default 180 seconds. 'int'> (Optional)\n            interval: <interval value between checks for verifying module status, default 30 seconds. 'int'> (Optional)\n\n\n    Example\n    -------\n    reload:\n        reload_service_args:\n            timeout: 600\n            reload_creds: clean_reload_creds\n            prompt_recovery: True\n            reconnect_sleep: 200 (Unicon NXOS reload service argument)\n\n        check_modules:\n            check: False\n\n    "}} from Client (pid: 14473, num_ctx: 2)
27: osboxes: 2021-02-11T06:37:04: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'start_section', 'data': {'id': 'STEP 1', 'xref': {'file': '/home/osboxes/pyATS/lib/python3.8/site-packages/genie/libs/clean/clean.py', 'line': 249}, 'logfile': '/home/osboxes/pyATS/cleaners/Kleenex_2021Feb11_06:36:43.972505/Kleenex.R1.log', 'type': 'Step', 'name': "Reload 'R1'", 'continue_': False}} from Client (pid: 14473, num_ctx: 3)
28: osboxes: 2021-02-11T06:37:05: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'id': 'STEP 1', 'result': Failed, 'name': "Reload 'R1'"}} from Client (pid: 14473, num_ctx: 4)
29: osboxes: 2021-02-11T06:37:05: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'id': 'reload', 'result': Failed, 'parameters': {'device': '<Device R1 at 0x7fd466048760>', 'reload_service_args': {'timeout': 600, 'reload_creds': 'default', 'prompt_recovery': 1}}, 'description': " This stage reloads the device.\n\n    Stage Schema\n    ------------\n    reload:\n        reload_service_args: (Optional, if not specified defaults below are used)\n            timeout: <reload timeout value, default 800 seconds. 'int'> (Optional)\n            reload_creds: <Credential name defined in the testbed yaml file to be used during reload, default 'default'. 'str'> (Optional)\n            prompt_recovery: <Enable/Disable prompt recovery feature, 'bool'> (Optional)\n            <Key>: <Value> (Any other key:value pairs that the unicon reload service allows for)\n\n        check_modules:\n            check: <Enable/Disable checking of modules after reload, default 'True'. 'bool'> (Optional)>\n            timeout: <timeout value to verify modules are in stable state, default 180 seconds. 'int'> (Optional)\n            interval: <interval value between checks for verifying module status, default 30 seconds. 'int'> (Optional)\n\n\n    Example\n    -------\n    reload:\n        reload_service_args:\n            timeout: 600\n            reload_creds: clean_reload_creds\n            prompt_recovery: True\n            reconnect_sleep: 200 (Unicon NXOS reload service argument)\n\n        check_modules:\n            check: False\n\n    "}} from Client (pid: 14473, num_ctx: 3)
30: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'id': 'CleanTestcase', 'result': Failed, 'parameters': {}}} from Client (pid: 14473, num_ctx: 2)
31: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'add_detail', 'data': {'detail': 'Caught error while attempting to clean device:\n  cleaner = PyatsDeviceClean\n   device = Device R1, type ios\n      pid = 14473\n\nTraceback (most recent call last):\n  File "src/pyats/kleenex/worker.py", line 101, in pyats.kleenex.worker.KleenexWorker.run\n  File "/home/osboxes/pyATS/lib/python3.8/site-packages/genie/libs/clean/clean.py", line 264, in clean\n    super().clean(device, reporter, *args, **kwargs)\n  File "/home/osboxes/pyATS/lib/python3.8/site-packages/genie/libs/clean/clean.py", line 258, in clean\n    raise Exception("Clean {result}.".format(result=str(result)))\nException: Clean failed.\n'}} from Client (pid: 14473, num_ctx: 1)
32: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_section', 'data': {'result': Failed, 'device_clean': AttrDict({'connect': {'timeout': 100}, 'reload': {'reload_service_args': {'timeout': 600, 'reload_creds': 'default', 'prompt_recovery': True}}, 'apply_configuration': {'configuration': 'hostname PE1'}, 'order': ['connect', 'apply_configuration', 'reload'], 'images': []})}} from Client (pid: 14473, num_ctx: 1)
33: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Connection closed by Client (pid: 14473, num_ctx: 0)
34: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_plugin', 'data': {}} from Client (pid: 14453, num_ctx: 2)
35: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'stop_testsuite', 'data': {}} from Client (pid: 14453, num_ctx: 1)
36: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received {'name': 'generate_report', 'data': {}} from Client (pid: 14453, num_ctx: 0)
37: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Received SIGTERM
38: osboxes: 2021-02-11T06:37:18: %REPORTER-6-INFO: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Stopping Reporter Server
39: osboxes: 2021-02-11T06:37:18: %REPORTER-7-DEBUG: %[pid=14472][pname=ForkProcess-1][tid=140550921074496][tname=MainThread]: Clients still registered. Terminating.
